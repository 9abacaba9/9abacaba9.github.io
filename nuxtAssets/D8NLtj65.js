import{_ as g}from"./CmPQ7Mzi.js";import{d as h,p as x,o as f,u,D as m,K as y,M as w,n as k,s as I,c as p,b as _,e as s,F as v,h as b,t as n,f as S,w as z,g as D,j as M}from"./dVWTdz__.js";import{M as T,a as L}from"./SskoH84V.js";import{T as N}from"./CcTuiQ7E.js";const B={class:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8"},C={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg mb-6 p-4"},E={class:"overflow-x-auto"},F={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},R={class:"divide-y divide-gray-200 dark:divide-gray-700"},V={class:"text-left py-2 pr-2 font-semibold align-top"},K={class:"py-2"},P={class:"py-2 text-right align-top"},W={class:"py-2 text-right align-top"},j={class:"py-2 text-right align-top"},H={class:"py-2 text-right align-top font-bold"},O={class:"py-2 text-right align-top"},Q=h({__name:"standings",setup($){const l=x([]);return f(async()=>{var a;u({title:"Standings - CRK2"});const d=(await m.select().from(y).all()).map(t=>N.from_drizzle(t)),e=[];for(let t of d)e[t.id]={id:t.id,name:t.name,matches:0,wins:0,losses:0,draws:0,nrr:0};const c=(await m.select().from(w).all()).map(t=>T.from_drizzle(t));for(let t of c){if(t.knockout||(await t.load_data(m),t.Status!=L.COMPLETED))continue;if(e[t.team1ID].matches++,e[t.team2ID].matches++,!t.Winner){e[t.team1ID].draws++,e[t.team2ID].draws++;continue}let i=6*(t.SecondInning.target-1)/t.max_balls,o=t.SecondInning.runs;((a=t.SecondInning)==null?void 0:a.wickets_left)==0?o/=t.max_balls/6:o/=t.SecondInning.balls/6;let r=i-o;e[t.team1ID].nrr+=r,e[t.team2ID].nrr-=r,r>0?(e[t.team1ID].wins++,e[t.team2ID].losses++):(e[t.team2ID].wins++,e[t.team1ID].losses++)}for(let t of d)l.push(e[t.id]);l.sort((t,i)=>{let o=t.wins*2+t.draws,r=i.wins*2+i.draws;return o!=r?r-o:i.nrr-t.nrr}),await k(),I(!1)}),(d,e)=>{const c=g;return _(),p("div",B,[s("div",C,[e[1]||(e[1]=s("h3",{class:"text-xl font-bold"},"Standings",-1)),s("div",E,[s("table",F,[e[0]||(e[0]=s("thead",null,[s("tr",{class:"text-left text-xs font-medium text-gray-500 dark:text-gray-400 tracking-wider"},[s("th",{class:"py-2"},"#"),s("th",{class:"py-2"}," Team "),s("th",{class:"py-2 px-1 text-right"},"M"),s("th",{class:"py-2 px-1 text-right"},"W"),s("th",{class:"py-2 px-1 text-right"},"L"),s("th",{class:"py-2 px-1 text-right"},"Pts"),s("th",{class:"py-2 px-1 text-right"},"NRR")])],-1)),s("tbody",R,[(_(!0),p(v,null,b(M(l),(a,t)=>(_(),p("tr",{key:t,class:"text-sm text-gray-900 dark:text-gray-100"},[s("td",V,n(t+1),1),s("td",K,[s("div",null,[S(c,{to:`/teams/${a.id}`,class:"font-medium"},{default:z(()=>[D(n(a.name),1)]),_:2},1032,["to"])])]),s("td",P,n(a.matches),1),s("td",W,n(a.wins),1),s("td",j,n(a.losses),1),s("td",H,n(a.wins*2+a.draws),1),s("td",O,n((a.nrr>0?"+":"")+a.nrr.toFixed(3)),1)]))),128))])])])])])}}});export{Q as default};
