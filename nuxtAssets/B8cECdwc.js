import{d as S,a3 as W,I as N,m as P,r as p,p as I,o as A,W as V,D as m,U as o,V as v,a6 as M,K as R,u as H,n as k,s as L,c as d,b as l,e as t,t as i,j as s,f as c,_ as q,w as b,g as y,F,h as K,y as O,k as B,A as U,C as G,R as J,ak as Q,al as X}from"./CHxXT5wL.js";import{_ as Y}from"./D5C0Ey2G.js";import{T as Z}from"./Ivdj-dxv.js";const tt={class:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8"},et={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden mb-6"},at={class:"p-6 flex flex-col justify-between"},st={class:"flex items-center justify-between"},it={class:"text-xl font-bold text-gray-900 dark:text-white"},rt={class:"flex gap-2"},nt=["disabled"],ot=["disabled"],dt={class:"mt-4"},lt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden mb-6"},gt={class:"border-b border-gray-200 dark:border-gray-700"},xt={class:"flex"},ut=["onClick"],mt={class:"p-4"},ct={key:0,class:"space-y-6"},yt={class:"space-y-4"},_t={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3"},vt={class:"grid grid-cols-2 gap-3"},wt={class:"font-medium text-gray-900 dark:text-white"},pt={class:"font-medium text-gray-900 dark:text-white"},kt={class:"font-medium text-gray-900 dark:text-white"},bt={key:0,class:"font-medium text-gray-900 dark:text-white"},ft={key:1,class:"font-medium text-gray-900 dark:text-white"},ht={class:"font-medium text-gray-900 dark:text-white"},Dt={class:"font-medium text-gray-900 dark:text-white"},Ct={class:"font-medium text-gray-900 dark:text-white"},It={class:"font-medium text-gray-900 dark:text-white"},Rt={key:1,class:"space-y-6"},Bt={class:"space-y-4"},zt={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3"},Tt={class:"grid grid-cols-2 gap-3"},$t={class:"font-medium text-gray-900 dark:text-white"},jt={class:"font-medium text-gray-900 dark:text-white"},Et={class:"font-medium text-gray-900 dark:text-white"},St={class:"font-medium text-gray-900 dark:text-white"},Wt={class:"font-medium text-gray-900 dark:text-white"},Nt={key:0,class:"font-medium text-gray-900 dark:text-white"},Pt={key:1,class:"font-medium text-gray-900 dark:text-white"},At={class:"font-medium text-gray-900 dark:text-white"},Vt={class:"font-medium text-gray-900 dark:text-white"},Mt={class:"font-medium text-gray-900 dark:text-white"},Ht={class:"font-medium text-gray-900 dark:text-white"},Ut=S({__name:"index",setup(Lt){const z=W(),T=N(),x=P("warn_unsaved",()=>!1),$=[{id:"batting",name:"Batting"},{id:"bowling",name:"Bowling"}],_=p("batting"),a=p(void 0),f=p(void 0),r=I({matches:0,innings:0,runs:0,best:{runs:0,not_out:!1,matchID:-1,opponent:""},average:"-",strikeRate:"-",fifties:0,hundreds:0,fours:0,sixes:0}),n=I({matches:0,innings:0,balls:0,runs:0,wickets:0,best:{wickets:0,runs:0,matchID:-1,opponent:""},economy:"-",average:"-",strikeRate:"-",fiveWickets:0});async function j(){var e;if(!a.value)return;let u=await U("Edit Player","Enter new name","Edit Player",(e=a.value)==null?void 0:e.name);u.trim()&&(x.value=!0,await k(),await m.update(o).set({name:u}).where(v(o.id,a.value.id)),a.value.name=u,x.value=!1)}async function E(){if(a.value&&await G("Warning",`Are you sure you want to delete ${a.value.name}?`)){if(await a.value.get_match_count()!=0){await J("Error","Player has played matches. Please delete the matches first.");return}x.value=!0,await k(),await m.update(o).set({order:Q`${o.order} - 1`}).where(X(o.order,a.value.order)),await m.delete(o).where(v(o.id,a.value.id)),x.value=!1,await T.push(`/teams/${a.value.teamID}`)}}return A(async()=>{let u=parseInt(z.params.id);if(a.value=V.from_drizzle((await m.select().from(o).where(v(o.id,u)).limit(1))[0]),!a.value)throw M({fatal:!0,statusCode:404,statusMessage:"No such player"});a.value.setDB(m),f.value=Z.from_drizzle((await m.select().from(R).where(v(R.id,a.value.teamID)).limit(1))[0]),H({title:`${a.value.name} - CRK2`}),Object.assign(r,{matches:await a.value.get_match_count(),innings:await a.value.get_batting_innings(),runs:await a.value.get_batting_runs(),best:await a.value.get_batting_best(),average:await a.value.get_batting_average(),strikeRate:await a.value.get_batting_strike_rate(),fifties:await a.value.get_batting_50s(),hundreds:await a.value.get_batting_100s(),fours:await a.value.get_batting_fours(),sixes:await a.value.get_batting_sixes()}),Object.assign(n,{matches:r.matches,innings:await a.value.get_bowling_innings(),balls:await a.value.get_bowling_balls(),runs:await a.value.get_bowling_runs(),wickets:await a.value.get_bowling_wickets(),best:await a.value.get_bowling_best(),economy:await a.value.get_bowling_economy(),average:await a.value.get_bowling_average(),strikeRate:await a.value.get_bowling_strike_rate(),fiveWickets:await a.value.get_bowling_5s()}),await k(),L(!1)}),(u,e)=>{var D,C;const h=q,w=Y;return l(),d("div",tt,[t("div",et,[t("div",null,[t("div",at,[t("div",null,[t("div",st,[t("h1",it,i((D=s(a))==null?void 0:D.name),1),t("div",rt,[t("button",{onClick:j,disabled:s(x),class:"flex items-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-2 rounded",title:"edit"},[c(h,{name:"majesticons:edit-pen-2"})],8,nt),t("button",{onClick:E,disabled:s(x),class:"flex items-center bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-2 rounded",title:"delete"},[c(h,{name:"majesticons:delete-bin"})],8,ot)])]),t("div",dt,[e[0]||(e[0]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Team",-1)),c(w,{class:"font-medium text-gray-900 dark:text-white",to:`/teams/${(C=s(a))==null?void 0:C.teamID}`},{default:b(()=>{var g;return[y(i((g=s(f))==null?void 0:g.name),1)]}),_:1},8,["to"])])])])])]),t("div",lt,[t("div",gt,[t("nav",xt,[(l(),d(F,null,K($,g=>t("button",{key:g.id,onClick:qt=>_.value=g.id,class:O(["flex-1 px-4 py-3 text-sm font-medium whitespace-nowrap",[s(_)===g.id?"border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400":"text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"]])},i(g.name),11,ut)),64))])]),t("div",mt,[s(_)==="batting"?(l(),d("div",ct,[t("div",yt,[t("div",_t,[e[9]||(e[9]=t("h3",{class:"font-medium text-gray-900 dark:text-white"},"Batting Stats",-1)),t("div",vt,[t("div",null,[e[1]||(e[1]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Matches",-1)),t("p",wt,i(s(r).matches),1)]),t("div",null,[e[2]||(e[2]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Innings",-1)),t("p",pt,i(s(r).innings),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Runs",-1)),t("p",kt,i(s(r).runs),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Highest Score",-1)),s(r).best?(l(),d("p",bt,[y(i(s(r).best.runs+(s(r).best.not_out?"*":""))+" ",1),c(w,{to:`/match/${s(r).best.matchID}/scoreboard`,class:"text-xs text-gray-500 dark:text-gray-400"},{default:b(()=>[y(" vs "+i(s(r).best.opponent),1)]),_:1},8,["to"])])):(l(),d("p",ft,"-"))]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Average",-1)),t("p",ht,i(s(r).average),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Strike Rate",-1)),t("p",Dt,i(s(r).strikeRate),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"100s / 50s",-1)),t("p",Ct,i(s(r).hundreds)+" / "+i(s(r).fifties),1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"4s / 6s",-1)),t("p",It,i(s(r).fours)+" / "+i(s(r).sixes),1)])])])])])):B("",!0),s(_)==="bowling"?(l(),d("div",Rt,[t("div",Bt,[t("div",zt,[e[20]||(e[20]=t("h3",{class:"font-medium text-gray-900 dark:text-white"},"Bowling Stats",-1)),t("div",Tt,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Matches",-1)),t("p",$t,i(s(n).matches),1)]),t("div",null,[e[11]||(e[11]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Innings",-1)),t("p",jt,i(s(n).innings),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Runs",-1)),t("p",Et,i(s(n).runs),1)]),t("div",null,[e[13]||(e[13]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Balls",-1)),t("p",St,i(s(n).balls),1)]),t("div",null,[e[14]||(e[14]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Wickets",-1)),t("p",Wt,i(s(n).wickets),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Best Innings",-1)),s(n).best?(l(),d("p",Nt,[y(i(s(n).best.wickets)+"/"+i(s(n).best.runs)+" ",1),c(w,{to:`/match/${s(n).best.matchID}/scoreboard`,class:"text-xs text-gray-500 dark:text-gray-400"},{default:b(()=>[y(" vs "+i(s(n).best.opponent),1)]),_:1},8,["to"])])):(l(),d("p",Pt,"-"))]),t("div",null,[e[16]||(e[16]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Economy",-1)),t("p",At,i(s(n).economy),1)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Average",-1)),t("p",Vt,i(s(n).average),1)]),t("div",null,[e[18]||(e[18]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Strike Rate",-1)),t("p",Mt,i(s(n).strikeRate),1)]),t("div",null,[e[19]||(e[19]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"5 Wicket Hauls",-1)),t("p",Ht,i(s(n).fiveWickets),1)])])])])])):B("",!0)])])])}}});export{Ut as default};
