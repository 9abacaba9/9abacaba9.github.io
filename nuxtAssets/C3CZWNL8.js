import{d as S,y as N,z as T,A as W,r as v,D as C,o as $,E as A,u as H,n as p,s as M,c as o,a as d,b as t,t as i,i as a,e as u,_ as P,w,f as m,F as V,g as L,O,j as D,a3 as z,H as F,a2 as K}from"./BftIUcDm.js";import{_ as q}from"./BqSKh5cC.js";import{D as c}from"./Bcq5nZh3.js";const G={class:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8"},J={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden mb-6"},Q={class:"p-6 flex flex-col justify-between"},U={class:"flex items-center justify-between"},X={class:"text-xl font-bold text-gray-900 dark:text-white"},Y={class:"flex gap-2"},Z=["disabled"],tt=["disabled"],et={class:"mt-4"},at={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden mb-6"},st={class:"border-b border-gray-200 dark:border-gray-700"},it={class:"flex"},nt=["onClick"],rt={class:"p-4"},ot={key:0,class:"space-y-6"},dt={class:"space-y-4"},lt={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3"},gt={class:"grid grid-cols-2 gap-3"},xt={class:"font-medium text-gray-900 dark:text-white"},ut={class:"font-medium text-gray-900 dark:text-white"},mt={class:"font-medium text-gray-900 dark:text-white"},ct={key:0,class:"font-medium text-gray-900 dark:text-white"},yt={key:1,class:"font-medium text-gray-900 dark:text-white"},_t={class:"font-medium text-gray-900 dark:text-white"},vt={class:"font-medium text-gray-900 dark:text-white"},pt={class:"font-medium text-gray-900 dark:text-white"},wt={class:"font-medium text-gray-900 dark:text-white"},kt={key:1,class:"space-y-6"},bt={class:"space-y-4"},ft={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3"},ht={class:"grid grid-cols-2 gap-3"},Ct={class:"font-medium text-gray-900 dark:text-white"},Dt={class:"font-medium text-gray-900 dark:text-white"},Rt={class:"font-medium text-gray-900 dark:text-white"},It={class:"font-medium text-gray-900 dark:text-white"},Bt={class:"font-medium text-gray-900 dark:text-white"},Et={key:0,class:"font-medium text-gray-900 dark:text-white"},jt={key:1,class:"font-medium text-gray-900 dark:text-white"},St={class:"font-medium text-gray-900 dark:text-white"},Nt={class:"font-medium text-gray-900 dark:text-white"},Tt={class:"font-medium text-gray-900 dark:text-white"},Wt={class:"font-medium text-gray-900 dark:text-white"},Vt=S({__name:"index",setup($t){const R=N(),I=T(),g=W("warn_unsaved",()=>!1),B=[{id:"batting",name:"Batting"},{id:"bowling",name:"Bowling"}],y=v("batting"),s=v(void 0),k=v(void 0),n=C({matches:0,innings:0,runs:0,best:{runs:0,not_out:!1,matchID:-1,opponent:""},average:"-",strikeRate:"-",fifties:0,hundreds:0,fours:0,sixes:0}),r=C({matches:0,innings:0,balls:0,runs:0,wickets:0,best:{wickets:0,runs:0,matchID:-1,opponent:""},economy:"-",average:"-",strikeRate:"-",fiveWickets:0});async function E(){var e;if(!s.value)return;let x=await z("Edit Player","Enter new name","Edit Player",(e=s.value)==null?void 0:e.name);x.trim()&&(g.value=!0,await p(),await c.player.update(s.value.id,{name:x}),s.value.name=x,g.value=!1)}async function j(){if(s.value&&await F("Warning",`Are you sure you want to delete ${s.value.name}?`)){if(await s.value.get_match_count()!=0){await K("Error","Player has played matches. Please delete the matches first.");return}g.value=!0,await p(),await c.player.delete(s.value.id),g.value=!1,I.push("/")}}return $(async()=>{let x=parseInt(R.params.id);if(s.value=await c.player.get(x),!s.value)throw A({fatal:!0,statusCode:404,statusMessage:"No such player"});s.value.setDB(c),k.value=await c.team.get(s.value.teamID),H({title:`${s.value.name} - CRK2`}),Object.assign(n,{matches:await s.value.get_match_count(),innings:await s.value.get_batting_innings(),runs:await s.value.get_batting_runs(),best:await s.value.get_batting_best(),average:await s.value.get_batting_average(),strikeRate:await s.value.get_batting_strike_rate(),fifties:await s.value.get_batting_50s(),hundreds:await s.value.get_batting_100s(),fours:await s.value.get_batting_fours(),sixes:await s.value.get_batting_sixes()}),Object.assign(r,{matches:n.matches,innings:await s.value.get_bowling_innings(),balls:await s.value.get_bowling_balls(),runs:await s.value.get_bowling_runs(),wickets:await s.value.get_bowling_wickets(),best:await s.value.get_bowling_best(),economy:await s.value.get_bowling_economy(),average:await s.value.get_bowling_average(),strikeRate:await s.value.get_bowling_strike_rate(),fiveWickets:await s.value.get_bowling_5s()}),await p(),M(!1)}),(x,e)=>{var f,h;const b=P,_=q;return d(),o("div",G,[t("div",J,[t("div",null,[t("div",Q,[t("div",null,[t("div",U,[t("h1",X,i((f=a(s))==null?void 0:f.name),1),t("div",Y,[t("button",{onClick:E,disabled:a(g),class:"flex items-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-2 rounded",title:"edit"},[u(b,{name:"majesticons:edit-pen-2"})],8,Z),t("button",{onClick:j,disabled:a(g),class:"flex items-center bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-2 rounded",title:"delete"},[u(b,{name:"majesticons:delete-bin"})],8,tt)])]),t("div",et,[e[0]||(e[0]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Team",-1)),u(_,{class:"font-medium text-gray-900 dark:text-white",to:`/teams/${(h=a(s))==null?void 0:h.teamID}`},{default:w(()=>{var l;return[m(i((l=a(k))==null?void 0:l.name),1)]}),_:1},8,["to"])])])])])]),t("div",at,[t("div",st,[t("nav",it,[(d(),o(V,null,L(B,l=>t("button",{key:l.id,onClick:At=>y.value=l.id,class:O(["flex-1 px-4 py-3 text-sm font-medium whitespace-nowrap",[a(y)===l.id?"border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400":"text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"]])},i(l.name),11,nt)),64))])]),t("div",rt,[a(y)==="batting"?(d(),o("div",ot,[t("div",dt,[t("div",lt,[e[9]||(e[9]=t("h3",{class:"font-medium text-gray-900 dark:text-white"},"Batting Stats",-1)),t("div",gt,[t("div",null,[e[1]||(e[1]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Matches",-1)),t("p",xt,i(a(n).matches),1)]),t("div",null,[e[2]||(e[2]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Innings",-1)),t("p",ut,i(a(n).innings),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Runs",-1)),t("p",mt,i(a(n).runs),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Highest Score",-1)),a(n).best?(d(),o("p",ct,[m(i(a(n).best.runs+(a(n).best.not_out?"*":""))+" ",1),u(_,{to:`/match/${a(n).best.matchID}/scoreboard`,class:"text-xs text-gray-500 dark:text-gray-400"},{default:w(()=>[m(" vs "+i(a(n).best.opponent),1)]),_:1},8,["to"])])):(d(),o("p",yt,"-"))]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Average",-1)),t("p",_t,i(a(n).average),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Strike Rate",-1)),t("p",vt,i(a(n).strikeRate),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"100s / 50s",-1)),t("p",pt,i(a(n).hundreds)+" / "+i(a(n).fifties),1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"4s / 6s",-1)),t("p",wt,i(a(n).fours)+" / "+i(a(n).sixes),1)])])])])])):D("",!0),a(y)==="bowling"?(d(),o("div",kt,[t("div",bt,[t("div",ft,[e[20]||(e[20]=t("h3",{class:"font-medium text-gray-900 dark:text-white"},"Bowling Stats",-1)),t("div",ht,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Matches",-1)),t("p",Ct,i(a(r).matches),1)]),t("div",null,[e[11]||(e[11]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Innings",-1)),t("p",Dt,i(a(r).innings),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Runs",-1)),t("p",Rt,i(a(r).runs),1)]),t("div",null,[e[13]||(e[13]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Balls",-1)),t("p",It,i(a(r).balls),1)]),t("div",null,[e[14]||(e[14]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Wickets",-1)),t("p",Bt,i(a(r).wickets),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Best Innings",-1)),a(r).best?(d(),o("p",Et,[m(i(a(r).best.wickets)+"/"+i(a(r).best.runs)+" ",1),u(_,{to:`/match/${a(r).best.matchID}/scoreboard`,class:"text-xs text-gray-500 dark:text-gray-400"},{default:w(()=>[m(" vs "+i(a(r).best.opponent),1)]),_:1},8,["to"])])):(d(),o("p",jt,"-"))]),t("div",null,[e[16]||(e[16]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Economy",-1)),t("p",St,i(a(r).economy),1)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Average",-1)),t("p",Nt,i(a(r).average),1)]),t("div",null,[e[18]||(e[18]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Strike Rate",-1)),t("p",Tt,i(a(r).strikeRate),1)]),t("div",null,[e[19]||(e[19]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"5 Wicket Hauls",-1)),t("p",Wt,i(a(r).fiveWickets),1)])])])])])):D("",!0)])])])}}});export{Vt as default};
