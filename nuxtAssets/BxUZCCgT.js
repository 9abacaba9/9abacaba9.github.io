import{_ as ht}from"./CmPQ7Mzi.js";import{d as ft,a3 as bt,I as kt,m as vt,p as wt,r as rt,o as It,D as h,M as ot,V as E,a6 as Dt,u as St,n as dt,s as Tt,L as Ct,c as d,b as l,e as t,k as m,j as e,t as a,g as c,y as lt,F as z,h as F,f as N,w as R,C as zt,ao as M,ap as Ft,a2 as $t,aq as ct,Y as f,ar as Bt,a0 as Et,a7 as j,a8 as Nt}from"./dVWTdz__.js";import{M as _t,a as W,b as $,f as Rt,c as Ot}from"./SskoH84V.js";import{c as O}from"./BS3W-Fhy.js";import"./CcTuiQ7E.js";const Mt={class:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8"},jt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mb-6"},Wt={key:0,class:"flex justify-between items-center"},Yt={class:"flex flex-col"},At={class:"text-lg font-medium"},Lt={class:"text-lg font-medium mt-2"},Pt={class:"flex flex-col"},Vt={class:"flex flex-col items-end font-bold"},Ht={key:0,class:"text-lg"},Gt={key:0},Ut={class:"text-gray-500 dark:text-gray-400"},qt={key:1},Kt={class:"flex flex-col items-end font-bold"},Jt={key:0,class:"text-lg mt-2"},Qt={key:0},Xt={class:"text-gray-500 dark:text-gray-400"},Zt={key:1},te={class:"mt-3"},ee={class:"text-gray-500 dark:text-gray-400 text-sm"},se={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg mb-6"},ae={class:"border-b border-gray-200 dark:border-gray-700"},ne={class:"flex -mb-px"},ie={class:"p-4"},re={class:"overflow-x-auto"},oe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},de={class:"divide-y divide-gray-200 dark:divide-gray-700"},le={class:"py-2"},ce={class:"font-medium"},_e={class:"text-gray-600 dark:text-gray-400 max-w-xs text-sm"},ye={class:"py-2 px-1 text-right font-semibold align-top"},ge={class:"py-2 px-1 text-right align-top"},xe={class:"py-2 px-1 text-right align-top"},pe={class:"py-2 px-1 text-right align-top"},me={class:"py-2 px-1 text-right align-top"},ue={class:"flex flex-col gap-1"},he={class:"text-sm font-medium text-gray-900 dark:text-gray-100 flex justify-between"},fe={class:"text-gray-600 dark:text-gray-400"},be={class:"text-sm font-medium text-gray-900 dark:text-gray-100 flex justify-between"},ke={key:0},ve={class:"text-gray-600 dark:text-gray-400"},we={class:"mt-6"},Ie={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"},De={class:"text-sm text-gray-600 dark:text-gray-400"},Se={class:"mt-6"},Te={class:"text-sm text-gray-600 dark:text-gray-400"},Ce={class:"mt-6"},ze={class:"flex flex-col gap-1 text-sm divide-y divide-gray-200 dark:divide-gray-700"},Fe={class:"flex py-2 gap-1"},$e={class:"basis-5/12 text-left"},Be={class:"text-gray-600 dark:text-gray-400"},Ee={class:"basis-2/12 text-center font-semibold"},Ne={class:"text-gray-600 dark:text-gray-400"},Re={class:"basis-5/12 text-right"},Oe={class:"text-gray-600 dark:text-gray-400"},Me={class:"mt-6"},je={class:"overflow-x-auto"},We={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ye={class:"divide-y divide-gray-200 dark:divide-gray-700"},Ae={class:"px-1 py-2 font-medium"},Le={class:"px-1 py-2 text-right"},Pe={class:"px-1 py-2 text-right"},Ve={class:"px-1 py-2 text-right font-semibold"},He={class:"px-1 py-2 text-right"},Ge={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mt-6 grid grid-cols-2 gap-2"},Ze=ft({__name:"scoreboard",setup(Ue){const yt=bt(),gt=kt(),Y=vt("warn_unsaved",()=>!1),s=wt(new _t(-1,-1,-1,[],[],!1,!1)),o=rt(void 0),b=rt(0),xt=O(async()=>{var x,B,k,v,w,I,D,S,T;if(b.value,!o.value)return[];let u=(await h.select().from(M).where(E(M.inningID,o.value.id)).orderBy(M.id)).map(p=>Ft.from_drizzle(p)),i=[];for(let p of u){let g="not out";if(p.outOnBall!=-1){let n=$t.from_drizzle((await h.select().from(ct).where(E(ct.id,p.outOnBall)))[0]);if((n==null?void 0:n.wicket)==f.NONE)throw Bt.out_on_a_non_wicket_ball;(n==null?void 0:n.wicket)==f.BOWLED&&(g=`b ${(x=s.player_by_id(n.bowlerID))==null?void 0:x.name}`),((n==null?void 0:n.wicket)==f.CAUGHT||(n==null?void 0:n.wicket)==f.CAUGHT_AND_BATSMEN_CROSSED)&&(n.helperID==n.bowlerID?g=`c & b ${(B=s.player_by_id(n.bowlerID))==null?void 0:B.name}`:g=`c ${(k=s.player_by_id(n.helperID))==null?void 0:k.name} b ${(v=s.player_by_id(n.bowlerID))==null?void 0:v.name}`),(n==null?void 0:n.wicket)==f.LBW&&(g=`lbw b ${(w=s.player_by_id(n.bowlerID))==null?void 0:w.name}`),Et.includes(n==null?void 0:n.wicket)&&(g=`run out (${(I=s.player_by_id(n==null?void 0:n.helperID))==null?void 0:I.name})`),(n==null?void 0:n.wicket)==f.STUMPED&&(g=`st ${(D=s.player_by_id(n.helperID))==null?void 0:D.name} b ${(S=s.player_by_id(n.bowlerID))==null?void 0:S.name}`),(n==null?void 0:n.wicket)==f.HIT_WICKET&&(g=`hit wicket b ${(T=s.player_by_id(n.bowlerID))==null?void 0:T.name}`)}i.push({...p,strikeRate:p.strikeRate,dismissal:g})}return i}),A=O(async()=>{if(b.value,!!o.value)return await Rt(h,o.value)}),pt=O(async()=>{if(b.value,!!o.value)return await Ot(h,o.value)}),mt=O(async()=>{if(b.value,!!o.value)return(await h.select().from(j).where(E(j.inningID,o.value.id)).orderBy(j.id)).map(u=>Nt.from_drizzle(u))});async function ut(){await zt("Warning","Are you sure you want to delete this match?")&&(Y.value=!0,await dt(),await s.delete_self(),Y.value=!1,gt.push("/"))}return It(async()=>{var i,x;let u=(await h.select().from(ot).where(E(ot.id,parseInt(yt.params.id))))[0];if(u===void 0)throw Dt({fatal:!0,statusCode:404});Object.assign(s,_t.from_drizzle(u)),await s.load_data(h),s.SecondInning?(o.value=s.SecondInning,b.value++):s.FirstInning&&(o.value=s.FirstInning,b.value++),St({title:`Scoreboard - ${(i=s.team1)==null?void 0:i.name} vs ${(x=s.team2)==null?void 0:x.name} - CRK2`}),await dt(),Tt(!1)}),(u,i)=>{var k,v,w,I,D,S,T,p,g,n,L,P,V,H,G,U,q,K,J,Q,X,Z,tt,et,st,at,nt,it;const x=ht,B=Ct("Button");return l(),d("div",Mt,[t("div",jt,[e(s)?(l(),d("div",Wt,[t("div",Yt,[t("span",At,a((v=(k=e(s))==null?void 0:k.team1)==null?void 0:v.name),1),t("span",Lt,a((I=(w=e(s))==null?void 0:w.team2)==null?void 0:I.name),1)]),t("div",Pt,[t("div",Vt,[((D=e(s))==null?void 0:D.Status)!=e(W).NOT_STARTED?(l(),d("span",Ht,[c(a((T=(S=e(s))==null?void 0:S.FirstInning)==null?void 0:T.runs),1),((g=(p=e(s))==null?void 0:p.FirstInning)==null?void 0:g.id_YetToBat.length)!=0||e(s).FirstInning.id_striker!=-1&&e(s).FirstInning.id_non_striker!=-1?(l(),d("span",Gt,"/"+a((L=(n=e(s))==null?void 0:n.FirstInning)==null?void 0:L.wickets),1)):m("",!0),i[2]||(i[2]=c("   ")),t("span",Ut,"("+a(e($)((P=e(s))==null?void 0:P.FirstInning.balls))+")",1)])):(l(),d("span",qt," "))]),t("div",Kt,[[e(W).SECOND_INNING,e(W).COMPLETED].includes((V=e(s))==null?void 0:V.Status)?(l(),d("span",Jt,[c(a((G=(H=e(s))==null?void 0:H.SecondInning)==null?void 0:G.runs),1),((q=(U=e(s))==null?void 0:U.SecondInning)==null?void 0:q.id_YetToBat.length)!=0||((K=e(s))==null?void 0:K.SecondInning.id_striker)!=-1&&((J=e(s))==null?void 0:J.SecondInning.id_non_striker)!=-1?(l(),d("span",Qt,"/"+a((X=(Q=e(s))==null?void 0:Q.SecondInning)==null?void 0:X.wickets),1)):m("",!0),i[3]||(i[3]=c("   ")),t("span",Xt,"("+a(e($)((Z=e(s))==null?void 0:Z.SecondInning.balls))+")",1)])):(l(),d("span",Zt," "))])])])):m("",!0),t("div",te,[t("span",ee,a((tt=e(s))==null?void 0:tt.StatusMessage),1)])]),e(o)!=null?(l(),d("div",se,[t("div",ae,[t("nav",ne,[(et=e(s))!=null&&et.FirstInning?(l(),d("button",{key:0,onClick:i[0]||(i[0]=r=>o.value=e(s).FirstInning),class:lt(["px-4 py-4 text-sm font-medium whitespace-nowrap",[e(o)===e(s).FirstInning?"border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400":"text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"]])}," First Inning ",2)):m("",!0),(st=e(s))!=null&&st.SecondInning?(l(),d("button",{key:1,onClick:i[1]||(i[1]=r=>o.value=e(s).SecondInning),class:lt(["px-4 py-4 text-sm font-medium whitespace-nowrap",[e(o)===e(s).SecondInning?"border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400":"text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"]])}," Second Inning ",2)):m("",!0)])]),t("div",ie,[i[11]||(i[11]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Batting",-1)),t("div",re,[t("table",oe,[i[4]||(i[4]=t("thead",null,[t("tr",{class:"text-left text-xs font-medium text-gray-500 dark:text-gray-400 tracking-wider"},[t("th",{class:"py-2"},"Batter"),t("th",{class:"py-2 px-1 text-right"},"R"),t("th",{class:"py-2 px-1 text-right"},"B"),t("th",{class:"py-2 px-1 text-right"},"4s"),t("th",{class:"py-2 px-1 text-right"},"6s"),t("th",{class:"py-2 px-1 text-right"},"SR")])],-1)),t("tbody",de,[(l(!0),d(z,null,F(e(xt),r=>{var y,_;return l(),d("tr",{key:r.id,class:"text-sm text-gray-900 dark:text-gray-100"},[t("td",le,[t("div",ce,a((_=(y=e(s))==null?void 0:y.player_by_id(r.playerID))==null?void 0:_.name),1),t("div",_e,a(r.dismissal),1)]),t("td",ye,a(r.runs),1),t("td",ge,a(r.balls),1),t("td",xe,a(r.fours),1),t("td",pe,a(r.sixes),1),t("td",me,a(r.strikeRate),1)])}),128))])]),t("div",ue,[t("div",he,[i[5]||(i[5]=t("span",{class:"mr-4"},"Extras",-1)),t("span",null,[c(a(e(o).extras)+" ",1),t("span",fe," (b "+a(e(o).byes)+", lb "+a(e(o).leg_byes)+", w "+a(e(o).wides)+", nb "+a(e(o).no_balls)+") ",1)])]),t("div",be,[i[6]||(i[6]=t("span",{class:"mr-4"},"Total",-1)),t("span",null,[c(a(e(o).runs),1),e(o).id_YetToBat.length!=0||e(o).id_striker!=-1&&e(o).id_non_striker!=-1?(l(),d("span",ke,"/"+a(e(o).wickets),1)):m("",!0),t("span",ve," ("+a(e($)(e(o).balls))+" Overs, RR: "+a(e(o).run_rate)+") ",1)])])])]),t("div",we,[e(o).id_YetToBat.length>0?(l(),d("h3",Ie,"Yet To Bat")):m("",!0),t("p",De,[(l(!0),d(z,null,F(e(o).id_YetToBat,(r,y)=>{var _;return l(),d("span",{key:y},a((_=e(s).player_by_id(r))==null?void 0:_.name)+a(y+1!=e(o).id_YetToBat.length?", ":""),1)}),128))])]),t("div",Se,[i[7]||(i[7]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"},"Fall of Wickets",-1)),t("p",Te,[(l(!0),d(z,null,F(e(A),(r,y)=>{var _,C;return l(),d("span",{key:y},a(r.runs)+"-"+a(r.wickets)+" ("+a((_=e(s).player_by_id(r.playerID))==null?void 0:_.name)+", "+a(e($)(r.balls))+")"+a(y+1!=((C=e(A))==null?void 0:C.length)?", ":""),1)}),128))])]),t("div",Ce,[i[8]||(i[8]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"},"Partnerships",-1)),t("div",ze,[(l(!0),d(z,null,F(e(pt),(r,y)=>{var _,C;return l(),d("div",{key:y},[t("div",Fe,[t("div",$e,[t("span",null,[c(a(r.player1.runs),1),t("span",Be,"("+a(r.player1.balls)+")",1)]),c(" "+a((_=e(s).player_by_id(r.player1.id))==null?void 0:_.name),1)]),t("div",Ee,[c(a(r.runs),1),t("span",Ne," ("+a(r.balls)+")",1)]),t("div",Re,[t("span",null,[c(a(r.player2.runs),1),t("span",Oe,"("+a(r.player2.balls)+")",1)]),c(" "+a((C=e(s).player_by_id(r.player2.id))==null?void 0:C.name),1)])])])}),128))])]),t("div",Me,[i[10]||(i[10]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Bowling",-1)),t("div",je,[t("table",We,[i[9]||(i[9]=t("thead",null,[t("tr",{class:"text-left text-xs font-medium text-gray-500 dark:text-gray-400 tracking-wider"},[t("th",{class:"px-1 py-2"},"Bowler"),t("th",{class:"px-1 py-2 text-right"},"O"),t("th",{class:"px-1 py-2 text-right"},"R"),t("th",{class:"px-1 py-2 text-right"},"W"),t("th",{class:"px-1 py-2 text-right"},"Econ")])],-1)),t("tbody",Ye,[(l(!0),d(z,null,F(e(mt),(r,y)=>{var _;return l(),d("tr",{key:y,class:"text-sm text-gray-900 dark:text-gray-100"},[t("td",Ae,a((_=e(s).player_by_id(r.playerID))==null?void 0:_.name),1),t("td",Le,a(e($)(r.balls)),1),t("td",Pe,a(r.runs),1),t("td",Ve,a(r.wickets),1),t("td",He,a(r.economy),1)])}),128))])])])])])])):m("",!0),t("div",Ge,[N(x,{to:`/match/${(at=e(s))==null?void 0:at.id}`,class:"flex items-center bg-pink-500 dark:bg-pink-600 text-white font-bold py-2 px-4 rounded w-full justify-center"},{default:R(()=>i[12]||(i[12]=[c("Controls")])),_:1,__:[12]},8,["to"]),N(x,{to:`/match/${(nt=e(s))==null?void 0:nt.id}/timeline`,class:"flex items-center bg-indigo-500 dark:bg-indigo-600 text-white font-bold py-2 px-4 rounded w-full justify-center"},{default:R(()=>i[13]||(i[13]=[c("Timeline")])),_:1,__:[13]},8,["to"]),N(x,{to:`/match/${(it=e(s))==null?void 0:it.id}/charts`,class:"flex items-center bg-yellow-400 dark:bg-yellow-500 text-white font-bold py-2 px-4 rounded w-full justify-center"},{default:R(()=>i[14]||(i[14]=[c("Charts")])),_:1,__:[14]},8,["to"]),N(B,{class:"flex items-center bg-red-500 dark:bg-red-600 text-white font-bold py-2 px-4 rounded w-full justify-center",onClick:ut},{default:R(()=>i[15]||(i[15]=[c("Delete")])),_:1,__:[15]})])])}}});export{Ze as default};
