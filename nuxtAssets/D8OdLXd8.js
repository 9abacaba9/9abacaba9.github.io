import{_ as _t}from"./BqSKh5cC.js";import{a as ht,D as lt,M as B,b as rt,e as O}from"./Bcq5nZh3.js";import{C as dt,d as M,k as ut,l as E,L as yt,v as xt,r as $,o as ct,m as vt,p as wt,q as j,x as gt,B as kt,n as A,y as It,z as St,A as Ct,D as Dt,E as Ft,u as Bt,s as Ot,G as Tt,c as h,a as b,b as l,j as v,i as a,t as y,f as w,h as L,e as T,w as P,H as Pt}from"./BftIUcDm.js";import{c as N}from"./9bzZCwMd.js";const ft={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},Lt={ariaLabel:{type:String},ariaDescribedby:{type:String}},Nt={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...ft,...Lt},Et=xt[0]==="2"?(n,r)=>Object.assign(n,{attrs:r}):(n,r)=>Object.assign(n,r);function C(n){return gt(n)?j(n):n}function $t(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n;return gt(r)?new Proxy(n,{}):n}function jt(n,r){const f=n.options;f&&r&&Object.assign(f,r)}function bt(n,r){n.labels=r}function pt(n,r,f){const m=[];n.datasets=r.map(t=>{const u=n.datasets.find(_=>_[f]===t[f]);return!u||!t.data||m.includes(u)?{...t}:(m.push(u),Object.assign(u,t),u)})}function At(n,r){const f={labels:[],datasets:[]};return bt(f,n.labels),pt(f,n.datasets,r),f}const Mt=M({props:Nt,setup(n,r){let{expose:f,slots:m}=r;const t=$(null),u=ut(null);f({chart:u});const _=()=>{if(!t.value)return;const{type:p,data:k,options:e,plugins:s,datasetIdKey:i}=n,g=At(k,i),o=$t(g,k);u.value=new dt(t.value,{type:p,data:o,options:{...e},plugins:s})},x=()=>{const p=j(u.value);p&&(n.destroyDelay>0?setTimeout(()=>{p.destroy(),u.value=null},n.destroyDelay):(p.destroy(),u.value=null))},D=p=>{p.update(n.updateMode)};return ct(_),vt(x),wt([()=>n.options,()=>n.data],(p,k)=>{let[e,s]=p,[i,g]=k;const o=j(u.value);if(!o)return;let d=!1;if(e){const c=C(e),I=C(i);c&&c!==I&&(jt(o,c),d=!0)}if(s){const c=C(s.labels),I=C(g.labels),S=C(s.datasets),F=C(g.datasets);c!==I&&(bt(o.config.data,c),d=!0),S&&S!==F&&(pt(o.config.data,S,n.datasetIdKey),d=!0)}d&&A(()=>{D(o)})},{deep:!0}),()=>E("canvas",{role:"img",ariaLabel:n.ariaLabel,ariaDescribedby:n.ariaDescribedby,ref:t},[E("p",{},[m.default?m.default():""])])}});function mt(n,r){return dt.register(r),M({props:ft,setup(f,m){let{expose:t}=m;const u=ut(null),_=x=>{u.value=x==null?void 0:x.chart};return t({chart:u}),()=>E(Mt,Et({ref:_},{type:n,...f}))}})}const it=mt("bar",kt),Rt=mt("line",yt),Vt={class:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8"},qt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mb-6"},Kt={key:0,class:"flex justify-between items-center"},Gt={class:"flex flex-col"},Ht={class:"text-lg font-medium"},Ut={class:"text-lg font-medium mt-2"},Yt={class:"flex flex-col"},zt={class:"flex flex-col items-end font-bold"},Wt={key:0,class:"text-lg"},Jt={key:0},Qt={class:"text-gray-500 dark:text-gray-400"},Xt={key:1},Zt={class:"flex flex-col items-end font-bold"},te={key:0,class:"text-lg mt-2"},ee={key:0},se={class:"text-gray-500 dark:text-gray-400"},ae={key:1},ne={class:"mt-3"},oe={class:"text-gray-500 dark:text-gray-400 text-sm"},le={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg mb-6 p-4 w-full"},re={class:"w-full overflow-x-auto overflow-hidden"},ie={class:"min-w-[640px]"},de={key:0},ue={class:"w-full overflow-x-auto overflow-hidden"},ce={class:"min-w-[640px]"},ge={class:"w-full overflow-x-auto overflow-hidden"},fe={class:"min-w-[640px]"},be={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mt-6 grid grid-cols-2 gap-2"},ye=M({__name:"charts",setup(n){const r=It(),f=St(),m=Ct("warn_unsaved",()=>!1),t=Dt(new ht(-1,-1,-1,[],[],!1,!1)),u=$(void 0),_=$(0),x=N(async()=>{var i;_.value;let e={labels:[],datasets:[]};if(e.labels=[],e.datasets=[],!t.FirstInning)return e;let s=await O(t.FirstInning);for(;e.labels.length<s.length;)e.labels.push((e.labels.length+1).toString());e.datasets.push({label:`${(i=t.team1)==null?void 0:i.name}`,data:[],borderColor:"#36A2EB",backgroundColor:"#9BD0F5"});for(let g of s){let o=0;for(let d of g.balls)o+=d.runs_by_running+d.boundary,d.legal||o++;e.datasets[0].data.push(o)}return e}),D=N(async()=>{var i;_.value;let e={labels:[],datasets:[]};if(e.labels=[],e.datasets=[],!t.SecondInning)return e;let s=await O(t.SecondInning);for(;e.labels.length<s.length;)e.labels.push((e.labels.length+1).toString());e.datasets.push({label:`${(i=t.team2)==null?void 0:i.name}`,data:[],borderColor:"#FF6384",backgroundColor:"#FFB1C1"});for(let g of s){let o=0;for(let d of g.balls)o+=d.runs_by_running+d.boundary,d.legal||o++;e.datasets[0].data.push(o)}return e}),p=N(async()=>{var s,i;_.value;let e={labels:[],datasets:[]};if(e.labels=[],e.datasets=[],t.FirstInning){let g=await O(t.FirstInning);for(;e.labels.length<g.length;)e.labels.push((e.labels.length+1).toString());e.datasets.push({label:`${(s=t.team1)==null?void 0:s.name}`,data:[],borderColor:"#36A2EB",backgroundColor:"#9BD0F5"});let o=0;for(let d of g){for(let c of d.balls)o+=c.runs_by_running+c.boundary,c.legal||o++;e.datasets[0].data.push(o)}}if(t.SecondInning){let g=await O(t.SecondInning);for(;e.labels.length<g.length;)e.labels.push((e.labels.length+1).toString());e.datasets.push({label:`${(i=t.team2)==null?void 0:i.name}`,data:[],borderColor:"#FF6384",backgroundColor:"#FFB1C1"});let o=0;for(let d of g){for(let c of d.balls)o+=c.runs_by_running+c.boundary,c.legal||o++;e.datasets[1].data.push(o)}}return e});async function k(){await Pt("Warning","Are you sure you want to delete this match?")&&(m.value=!0,await A(),await t.delete_self(),m.value=!1,f.push("/"))}return ct(async()=>{var s,i;let e=await lt.match.get(parseInt(r.params.id));if(e===void 0)throw Ft({fatal:!0,statusCode:404});Object.assign(t,e),await t.load_data(lt),_.value++,t.SecondInning?u.value=t.SecondInning:t.FirstInning&&(u.value=t.FirstInning),Bt({title:`Charts - ${(s=t.team1)==null?void 0:s.name} vs ${(i=t.team2)==null?void 0:i.name} - CRK2`}),await A(),Ot(!1)}),(e,s)=>{var o,d,c,I,S,F,R,V,q,K,G,H,U,Y,z,W,J,Q,X,Z,tt,et,st,at,nt,ot;const i=_t,g=Tt("Button");return b(),h("div",Vt,[l("div",qt,[a(t)?(b(),h("div",Kt,[l("div",Gt,[l("span",Ht,y((d=(o=a(t))==null?void 0:o.team1)==null?void 0:d.name),1),l("span",Ut,y((I=(c=a(t))==null?void 0:c.team2)==null?void 0:I.name),1)]),l("div",Yt,[l("div",zt,[((S=a(t))==null?void 0:S.Status)!=a(B).NOT_STARTED?(b(),h("span",Wt,[w(y((R=(F=a(t))==null?void 0:F.FirstInning)==null?void 0:R.runs),1),((q=(V=a(t))==null?void 0:V.FirstInning)==null?void 0:q.id_YetToBat.length)!=0||a(t).FirstInning.id_striker!=-1&&a(t).FirstInning.id_non_striker!=-1?(b(),h("span",Jt,"/"+y((G=(K=a(t))==null?void 0:K.FirstInning)==null?void 0:G.wickets),1)):v("",!0),s[0]||(s[0]=w("   ")),l("span",Qt,"("+y(a(rt)((H=a(t))==null?void 0:H.FirstInning.balls))+")",1)])):(b(),h("span",Xt," "))]),l("div",Zt,[[a(B).SECOND_INNING,a(B).COMPLETED].includes((U=a(t))==null?void 0:U.Status)?(b(),h("span",te,[w(y((z=(Y=a(t))==null?void 0:Y.SecondInning)==null?void 0:z.runs),1),((J=(W=a(t))==null?void 0:W.SecondInning)==null?void 0:J.id_YetToBat.length)!=0||((Q=a(t))==null?void 0:Q.SecondInning.id_striker)!=-1&&((X=a(t))==null?void 0:X.SecondInning.id_non_striker)!=-1?(b(),h("span",ee,"/"+y((tt=(Z=a(t))==null?void 0:Z.SecondInning)==null?void 0:tt.wickets),1)):v("",!0),s[1]||(s[1]=w("   ")),l("span",se,"("+y(a(rt)((et=a(t))==null?void 0:et.SecondInning.balls))+")",1)])):(b(),h("span",ae," "))])])])):v("",!0),l("div",ne,[l("span",oe,y((st=a(t))==null?void 0:st.StatusMessage),1)])]),a(t).Status!=a(B).NOT_STARTED?(b(),h("div",le,[s[3]||(s[3]=l("div",{class:"text-gray-500 dark:text-gray-400 text-sm md:hidden mb-4"},"For better experience on mobile devices, please view in landscape mode.",-1)),s[4]||(s[4]=l("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"First Innings",-1)),l("div",re,[l("div",ie,[a(x)?(b(),L(a(it),{key:0,data:a(x)},null,8,["data"])):v("",!0)])]),a(t).SecondInning?(b(),h("div",de,[s[2]||(s[2]=l("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Second Innings",-1)),l("div",ue,[l("div",ce,[a(D)?(b(),L(a(it),{key:0,data:a(D)},null,8,["data"])):v("",!0)])])])):v("",!0),s[5]||(s[5]=l("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Runs Comparison",-1)),l("div",ge,[l("div",fe,[a(p)?(b(),L(a(Rt),{key:0,data:a(p)},null,8,["data"])):v("",!0)])])])):v("",!0),l("div",be,[T(i,{to:`/match/${(at=a(t))==null?void 0:at.id}`,class:"flex items-center bg-pink-500 dark:bg-pink-600 text-white font-bold py-2 px-4 rounded w-full justify-center"},{default:P(()=>s[6]||(s[6]=[w("Controls")])),_:1},8,["to"]),T(i,{to:`/match/${(nt=a(t))==null?void 0:nt.id}/scoreboard`,class:"flex items-center bg-green-500 dark:bg-green-600 text-white font-bold py-2 px-4 rounded w-full justify-center"},{default:P(()=>s[7]||(s[7]=[w("Scoreboard")])),_:1},8,["to"]),T(i,{to:`/match/${(ot=a(t))==null?void 0:ot.id}/timeline`,class:"flex items-center bg-indigo-500 dark:bg-indigo-600 text-white font-bold py-2 px-4 rounded w-full justify-center"},{default:P(()=>s[8]||(s[8]=[w("Timeline")])),_:1},8,["to"]),T(g,{class:"flex items-center bg-red-500 dark:bg-red-600 text-white font-bold py-2 px-4 rounded w-full justify-center",onClick:k},{default:P(()=>s[9]||(s[9]=[w("Delete")])),_:1})])])}}});export{ye as default};
