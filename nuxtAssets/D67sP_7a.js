import{P as y,as as g,ad as i,r as w,at as A,J as E}from"./CHxXT5wL.js";function x(v,l,n){let t;y(n)?t={evaluating:n}:t={};const{lazy:u=!1,evaluating:e=void 0,shallow:h=!0,onError:d=g}=t,o=i(!u),s=h?i(l):w(l);let a=0;return A(async m=>{if(!o.value)return;a++;const f=a;let c=!1;e&&Promise.resolve().then(()=>{e.value=!0});try{const r=await v(p=>{m(()=>{e&&(e.value=!1),c||p()})});f===a&&(s.value=r)}catch(r){d(r)}finally{e&&f===a&&(e.value=!1),c=!0}}),u?E(()=>(o.value=!0,s.value)):s}export{x as c};
