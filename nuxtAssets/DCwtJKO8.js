import{_ as x}from"./BqSKh5cC.js";import{D as p,M as _}from"./Bcq5nZh3.js";import{d as h,D as f,o as u,u as y,n as w,s as k,c as m,a as g,b as s,F as I,g as v,t as n,e as b,w as S,f as D,i as L}from"./BftIUcDm.js";const M={class:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8"},N={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg mb-6 p-4"},B={class:"overflow-x-auto"},C={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},T={class:"divide-y divide-gray-200 dark:divide-gray-700"},E={class:"text-left py-2 pr-2 font-semibold align-top"},F={class:"py-2"},R={class:"py-2 text-right align-top"},V={class:"py-2 text-right align-top"},A={class:"py-2 text-right align-top"},P={class:"py-2 text-right align-top font-bold"},W={class:"py-2 text-right align-top"},j=h({__name:"standings",setup(H){const d=f([]);return u(async()=>{var a;y({title:"Standings - CRK2"});const l=await p.team.toArray(),e=[];for(let t of l)e[t.id]={id:t.id,name:t.name,matches:0,wins:0,losses:0,draws:0,nrr:0};const c=await p.match.toArray();for(let t of c){if(t.knockout||(await t.load_data(p),t.Status!=_.COMPLETED))continue;if(e[t.team1ID].matches++,e[t.team2ID].matches++,!t.Winner){e[t.team1ID].draws++,e[t.team2ID].draws++;continue}let r=6*(t.SecondInning.target-1)/t.max_balls,o=t.SecondInning.runs;((a=t.SecondInning)==null?void 0:a.wickets_left)==0?o/=t.max_balls/6:o/=t.SecondInning.balls/6;let i=r-o;e[t.team1ID].nrr+=i,e[t.team2ID].nrr-=i,i>0?(e[t.team1ID].wins++,e[t.team2ID].losses++):(e[t.team2ID].wins++,e[t.team1ID].losses++)}for(let t of l)d.push(e[t.id]);d.sort((t,r)=>{let o=t.wins*2+t.draws,i=r.wins*2+r.draws;return o!=i?i-o:r.nrr-t.nrr}),await w(),k(!1)}),(l,e)=>{const c=x;return g(),m("div",M,[s("div",N,[e[1]||(e[1]=s("h3",{class:"text-xl font-bold"},"Standings",-1)),s("div",B,[s("table",C,[e[0]||(e[0]=s("thead",null,[s("tr",{class:"text-left text-xs font-medium text-gray-500 dark:text-gray-400 tracking-wider"},[s("th",{class:"py-2"},"#"),s("th",{class:"py-2"}," Team "),s("th",{class:"py-2 px-1 text-right"},"M"),s("th",{class:"py-2 px-1 text-right"},"W"),s("th",{class:"py-2 px-1 text-right"},"L"),s("th",{class:"py-2 px-1 text-right"},"Pts"),s("th",{class:"py-2 px-1 text-right"},"NRR")])],-1)),s("tbody",T,[(g(!0),m(I,null,v(L(d),(a,t)=>(g(),m("tr",{key:t,class:"text-sm text-gray-900 dark:text-gray-100"},[s("td",E,n(t+1),1),s("td",F,[s("div",null,[b(c,{to:`/team/${a.id}`,class:"font-medium"},{default:S(()=>[D(n(a.name),1)]),_:2},1032,["to"])])]),s("td",R,n(a.matches),1),s("td",V,n(a.wins),1),s("td",A,n(a.losses),1),s("td",P,n(a.wins*2+a.draws),1),s("td",W,n((a.nrr>0?"+":"")+a.nrr.toFixed(3)),1)]))),128))])])])])])}}});export{j as default};
