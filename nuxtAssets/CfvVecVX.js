import{_ as ut}from"./_-jsk1oc.js";import{_ as gt}from"./BqSKh5cC.js";import{a as _t,D as X,M as y,b as Z,e as mt}from"./Bcq5nZh3.js";import{d as ft,y as pt,z as xt,A as yt,D as bt,r as tt,o as ht,E as kt,u as vt,n as et,s as wt,G as It,c as o,a,b as s,j as u,i as e,t as r,f as l,O as nt,F as st,g as at,h as St,e as _,w as m,H as Ct}from"./BftIUcDm.js";import{c as Ft}from"./9bzZCwMd.js";const Bt={class:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8"},Nt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mb-6"},Tt={key:0,class:"flex justify-between items-center"},jt={class:"flex flex-col"},Dt={class:"text-lg font-medium"},$t={class:"text-lg font-medium mt-2"},Et={class:"flex flex-col"},Mt={class:"flex flex-col items-end font-bold"},Ot={key:0,class:"text-lg"},At={key:0},Lt={class:"text-gray-500 dark:text-gray-400"},Rt={key:1},Vt={class:"flex flex-col items-end font-bold"},zt={key:0,class:"text-lg mt-2"},Gt={key:0},Ht={class:"text-gray-500 dark:text-gray-400"},Yt={key:1},Kt={class:"mt-3"},Pt={class:"text-gray-500 dark:text-gray-400 text-sm"},Wt={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg mb-6"},qt={class:"border-b border-gray-200 dark:border-gray-700"},Jt={class:"flex -mb-px"},Qt={class:"grid grid-cols-1 gap-4 p-4"},Ut={class:"text-sm font-medium"},Xt={class:"mt-2 flex gap-2"},Zt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mt-6 grid grid-cols-2 gap-2"},re=ft({__name:"timeline",setup(te){const ot=pt(),rt=xt(),b=yt("warn_unsaved",()=>!1),t=bt(new _t(-1,-1,-1,[],[],!1,!1)),i=tt(void 0),f=tt(0),it=Ft(async()=>{if(f.value,!!i.value)return await mt(i.value)});function dt(g){let n=0;for(let d of g)n+=d.runs_by_running+d.boundary,d.legal||n++;return n}async function lt(){await Ct("Warning","Are you sure you want to delete this match?")&&(b.value=!0,await et(),await t.delete_self(),b.value=!1,rt.push("/"))}return ht(async()=>{var n,d;let g=await X.match.get(parseInt(ot.params.id));if(g===void 0)throw kt({fatal:!0,statusCode:404});Object.assign(t,g),await t.load_data(X),t.SecondInning?(i.value=t.SecondInning,f.value++):t.FirstInning&&(i.value=t.FirstInning,f.value++),vt({title:`Timeline - ${(n=t.team1)==null?void 0:n.name} vs ${(d=t.team2)==null?void 0:d.name} - CRK2`}),await et(),wt(!1)}),(g,n)=>{var h,k,v,w,I,S,C,F,B,N,T,j,D,$,E,M,O,A,L,R,V,z,G,H,Y,K,P,W;const d=ut,p=gt,ct=It("Button");return a(),o("div",Bt,[s("div",Nt,[e(t)?(a(),o("div",Tt,[s("div",jt,[s("span",Dt,r((k=(h=e(t))==null?void 0:h.team1)==null?void 0:k.name),1),s("span",$t,r((w=(v=e(t))==null?void 0:v.team2)==null?void 0:w.name),1)]),s("div",Et,[s("div",Mt,[((I=e(t))==null?void 0:I.Status)!=e(y).NOT_STARTED?(a(),o("span",Ot,[l(r((C=(S=e(t))==null?void 0:S.FirstInning)==null?void 0:C.runs),1),((B=(F=e(t))==null?void 0:F.FirstInning)==null?void 0:B.id_YetToBat.length)!=0||e(t).FirstInning.id_striker!=-1&&e(t).FirstInning.id_non_striker!=-1?(a(),o("span",At,"/"+r((T=(N=e(t))==null?void 0:N.FirstInning)==null?void 0:T.wickets),1)):u("",!0),n[2]||(n[2]=l("   ")),s("span",Lt,"("+r(e(Z)((j=e(t))==null?void 0:j.FirstInning.balls))+")",1)])):(a(),o("span",Rt," "))]),s("div",Vt,[[e(y).SECOND_INNING,e(y).COMPLETED].includes((D=e(t))==null?void 0:D.Status)?(a(),o("span",zt,[l(r((E=($=e(t))==null?void 0:$.SecondInning)==null?void 0:E.runs),1),((O=(M=e(t))==null?void 0:M.SecondInning)==null?void 0:O.id_YetToBat.length)!=0||((A=e(t))==null?void 0:A.SecondInning.id_striker)!=-1&&((L=e(t))==null?void 0:L.SecondInning.id_non_striker)!=-1?(a(),o("span",Gt,"/"+r((V=(R=e(t))==null?void 0:R.SecondInning)==null?void 0:V.wickets),1)):u("",!0),n[3]||(n[3]=l("   ")),s("span",Ht,"("+r(e(Z)((z=e(t))==null?void 0:z.SecondInning.balls))+")",1)])):(a(),o("span",Yt," "))])])])):u("",!0),s("div",Kt,[s("span",Pt,r((G=e(t))==null?void 0:G.StatusMessage),1)])]),e(i)!=null?(a(),o("div",Wt,[s("div",qt,[s("nav",Jt,[(H=e(t))!=null&&H.FirstInning?(a(),o("button",{key:0,onClick:n[0]||(n[0]=c=>i.value=e(t).FirstInning),class:nt(["px-4 py-4 text-sm font-medium whitespace-nowrap",[e(i)===e(t).FirstInning?"border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400":"text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"]])}," First Inning ",2)):u("",!0),(Y=e(t))!=null&&Y.SecondInning?(a(),o("button",{key:1,onClick:n[1]||(n[1]=c=>i.value=e(t).SecondInning),class:nt(["px-4 py-4 text-sm font-medium whitespace-nowrap",[e(i)===e(t).SecondInning?"border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400":"text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"]])}," Second Inning ",2)):u("",!0)])]),s("div",Qt,[(a(!0),o(st,null,at(e(it),(c,q)=>{var J,Q;return a(),o("div",{class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",key:q},[s("div",Ut," Over "+r(q+1)+": "+r((J=e(t).player_by_id(c.bowler))==null?void 0:J.name)+" to "+r(c.batters.map(x=>{var U;return(U=e(t).player_by_id(x))==null?void 0:U.name}).slice(0,-1).join(", ")+" and "+((Q=e(t).player_by_id(c.batters.slice(-1)[0]))==null?void 0:Q.name))+" ("+r(dt(c.balls))+" runs) ",1),s("div",Xt,[(a(!0),o(st,null,at(c.balls,x=>(a(),St(d,{ball:x},null,8,["ball"]))),256))])])}),128))])])):u("",!0),s("div",Zt,[_(p,{to:`/match/${(K=e(t))==null?void 0:K.id}`,class:"flex items-center bg-pink-500 dark:bg-pink-600 text-white font-bold py-2 px-4 rounded w-full justify-center"},{default:m(()=>n[4]||(n[4]=[l("Controls")])),_:1},8,["to"]),_(p,{to:`/match/${(P=e(t))==null?void 0:P.id}/scoreboard`,class:"flex items-center bg-green-500 dark:bg-green-600 text-white font-bold py-2 px-4 rounded w-full justify-center"},{default:m(()=>n[5]||(n[5]=[l("Scoreboard")])),_:1},8,["to"]),_(p,{to:`/match/${(W=e(t))==null?void 0:W.id}/charts`,class:"flex items-center bg-yellow-400 dark:bg-yellow-500 text-white font-bold py-2 px-4 rounded w-full justify-center"},{default:m(()=>n[6]||(n[6]=[l("Charts")])),_:1},8,["to"]),_(ct,{class:"flex items-center bg-red-500 dark:bg-red-600 text-white font-bold py-2 px-4 rounded w-full justify-center",onClick:lt},{default:m(()=>n[7]||(n[7]=[l("Delete")])),_:1})])])}}});export{re as default};
