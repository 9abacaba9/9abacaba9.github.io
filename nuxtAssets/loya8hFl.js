import{_ as A}from"./BqSKh5cC.js";import{D as s}from"./Bcq5nZh3.js";import{d as C,y as V,D as N,V as L,aa as $,u as O,n as j,s as R,c,a as g,b as o,t as m,i as p,j as x,F as z,g as E,e as k,w as I,f as b,O as H}from"./BftIUcDm.js";const K={class:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8"},M={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg mb-6 p-4"},P={class:"text-xl font-bold"},G={class:"overflow-x-auto"},J={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Q={class:"text-left text-xs font-medium text-gray-500 dark:text-gray-400 tracking-wider"},U={class:"py-2"},W={class:"py-2 px-1 text-right"},X={key:0,class:"py-2 px-1 text-right"},Y={class:"divide-y divide-gray-200 dark:divide-gray-700"},Z={class:"text-left py-2 pr-2 font-semibold align-top"},ee={class:"py-2"},te={key:0,class:"text-gray-600 dark:text-gray-400 max-w-xs text-sm"},ae={key:0,class:"py-2 px-1 text-right align-top"},oe=C({__name:"[stat]",setup(ne){const q=V(),l=N({name:"",description:"",valueName:"",type:"",opponent:!1}),t=N([]);return L(async()=>{var f,u,r,_,D,T,F,S,B;const y=$.find(d=>d.name==q.params.stat);if(y&&Object.assign(l,y),O({title:l.description}),l.type!="team"&&!l.opponent){let d=await s.player.toArray();for(let e of d){e.setDB(s);let a=await s.team.get(e.teamID),n=await l.func(e);n=="-"||n=="0"||n=="0.0"||n=="0.00"||t.push({rank:1,name:e.name,id:e.id,value:n,team:a==null?void 0:a.name,teamId:a==null?void 0:a.id})}l.big_is_better?t.sort((e,a)=>parseFloat(a.value)-parseFloat(e.value)):t.sort((e,a)=>parseFloat(e.value)-parseFloat(a.value));for(let e=0;e<t.length;e++)t[e].value==((f=t[e-1])==null?void 0:f.value)?t[e].rank=t[e-1].rank:t[e].rank=e+1}else if(l.type=="team"){let d=await s.innings.toArray();for(let e of d){await e.load_data(s);let a=l.funcInn(e);if(a=="-")continue;let n="",i="";l.battingSide?(n=(u=await s.team.get(e.battingTeamID))==null?void 0:u.name,i=(r=await s.team.get(e.bowlingTeamID))==null?void 0:r.name):(n=(_=await s.team.get(e.bowlingTeamID))==null?void 0:_.name,i=(D=await s.team.get(e.battingTeamID))==null?void 0:D.name),t.push({rank:1,name:n,id:l.battingSide?e.battingTeamID:e.bowlingTeamID,value:a,opponent:i,matchId:(T=await s.match.where("id_FirstInning").equals(e.id).or("id_SecondInning").equals(e.id).first())==null?void 0:T.id,wickets:e.wickets.toString()})}l.big_is_better?t.sort((e,a)=>parseFloat(a.value)-parseFloat(e.value)):t.sort((e,a)=>parseFloat(e.value)-parseFloat(a.value));for(let e=0;e<t.length;e++)t[e].value==((F=t[e-1])==null?void 0:F.value)?t[e].rank=t[e-1].rank:t[e].rank=e+1;if(["team-highest-runs","team-lowest-runs","team-highest-chase"].includes(l.name))for(let e=0;e<t.length;e++)t[e].value=t[e].value+"/"+t[e].wickets}else if(l.name=="high-scores"){let d=await s.player_batting_inning.toArray();for(let e of d){if(e.runs==0)continue;let a=await s.player.get(e.playerID),n=await s.team.get(a.teamID),i=await s.innings.get(e.inningID),v=await s.team.get(i==null?void 0:i.bowlingTeamID),w=await s.match.where("id_FirstInning").equals(i.id).or("id_SecondInning").equals(i.id).first(),h=e.runs.toString()+"/";e.outOnBall==-1&&(h+="*"),t.push({rank:1,name:a.name,id:a.id,value:h,team:n.name,teamId:n.id,opponent:v.name,matchId:w.id})}t.sort((e,a)=>{let n=e.value.split("/"),i=a.value.split("/");return n[0]==i[0]?i[1]=="*"?1:n[1]=="*"?-1:0:parseInt(i[0])-parseInt(n[0])});for(let e=0;e<t.length;e++)t[e].value==((S=t[e-1])==null?void 0:S.value)?t[e].rank=t[e-1].rank:t[e].rank=e+1,t[e].value=t[e].value.replace("/","")}else{let d=await s.player_bowling_inning.toArray();for(let e of d){if(e.wickets==0)continue;let a=await s.player.get(e.playerID),n=await s.team.get(a.teamID),i=await s.innings.get(e.inningID),v=await s.team.get(i==null?void 0:i.battingTeamID),w=await s.match.where("id_FirstInning").equals(i.id).or("id_SecondInning").equals(i.id).first(),h=e.wickets.toString()+"/"+e.runs.toString();t.push({rank:1,name:a.name,id:a.id,value:h,team:n.name,teamId:n.id,opponent:v.name,matchId:w.id})}t.sort((e,a)=>{let n=e.value.split("/"),i=a.value.split("/");return n[0]==i[0]?parseInt(n[1])-parseInt(i[1]):parseInt(i[0])-parseInt(n[0])});for(let e=0;e<t.length;e++)t[e].value==((B=t[e-1])==null?void 0:B.value)?t[e].rank=t[e-1].rank:t[e].rank=e+1}await j(),R(!1)}),(y,f)=>{const u=A;return g(),c("div",K,[o("div",M,[o("h3",P,m(p(l).description),1),o("div",G,[o("table",J,[o("thead",null,[o("tr",Q,[f[0]||(f[0]=o("th",{class:"py-2"},"#",-1)),o("th",U,m(p(l).type=="team"?"Team":"Player"),1),o("th",W,m(p(l).valueName),1),p(l).opponent?(g(),c("th",X,"vs")):x("",!0)])]),o("tbody",Y,[(g(!0),c(z,null,E(p(t),(r,_)=>(g(),c("tr",{key:_,class:"text-sm text-gray-900 dark:text-gray-100"},[o("td",Z,m(r.rank),1),o("td",ee,[o("div",null,[k(u,{to:`/${p(l).type=="team"?"teams":"player"}/${r.id}`,class:"font-medium"},{default:I(()=>[b(m(r.name),1)]),_:2},1032,["to"])]),p(l).type!="team"?(g(),c("div",te,[k(u,{to:`/teams/${r.teamId}`},{default:I(()=>[b(m(r.team),1)]),_:2},1032,["to"])])):x("",!0)]),o("td",{class:H(["py-2 font-bold text-right align-top",p(l).opponent?"":"text-lg"])},m(r.value),3),p(l).opponent?(g(),c("td",ae,[k(u,{to:`/match/${r.matchId}/scoreboard`},{default:I(()=>[b(m(r.opponent),1)]),_:2},1032,["to"])])):x("",!0)]))),128))])])])])])}}});export{oe as default};
